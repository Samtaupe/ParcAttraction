<div class="critique-container">
  <h3>Ajouter une critique</h3>
  <form [formGroup]="critiqueForm" (ngSubmit)="onSubmit()">
    <mat-form-field class="full-width" appearance="fill">
      <mat-label>Description</mat-label>
      <input matInput formControlName="critique" type="text" required>
    </mat-form-field>
    
    <mat-form-field class="full-width" appearance="fill">
      <mat-label>Note (/20)</mat-label>
      <input matInput formControlName="note" type="number" min="0" max="20" required>
    </mat-form-field>
    
    <mat-slide-toggle formControlName="anonyme">Critique anonyme</mat-slide-toggle>
    
    <div *ngIf="!critiqueForm.get('anonyme')?.value">
      <mat-form-field class="full-width" appearance="fill">
        <mat-label>Nom</mat-label>
        <input matInput formControlName="nom">
      </mat-form-field>
      
      <mat-form-field class="full-width" appearance="fill">
        <mat-label>Pr√©nom</mat-label>
        <input matInput formControlName="prenom">
      </mat-form-field>
    </div>
    
    <button mat-button type="submit" [disabled]="critiqueForm.invalid">Enregistrer</button>
  </form>
  
  <h3>Critiques</h3>
  <ng-container *ngFor="let critique of critiques$ | async">
    <div class="critique-item" *ngIf="critique.attraction_id == attractionId">
      <p>{{ critique.critique }}</p>
      <p>Note: {{ critique.note }}/20</p>
      <p *ngIf="!critique.anonyme">{{ critique.nom }} {{ critique.prenom }}</p>
    </div>
  </ng-container>  
</div>
